# -*- coding: utf-8 -*-
"""dashboard.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1QXBDOvil577mBs2hb9xTlMfpjjHHkDgu
"""

#install streamlit dengan command
!pip install streamlit

#ini untuk run streamlit di collab
!npm install localtunnel

!ls

from google.colab import files
uploaded = files.upload()

from google.colab import files
uploaded = files.upload()

from google.colab import files
uploaded = files.upload()

# Commented out IPython magic to ensure Python compatibility.
# %%writefile app.py
# import streamlit as st
# import pandas as pd
# import matplotlib.pyplot as plt
# import seaborn as sns
# 
# # Load the data
# day_df = pd.read_csv("day.csv")
# hour_df = pd.read_csv("hour.csv")
# 
# # Add title and header
# st.title("Bike Sharing Dashboard 🚲")
# st.header("Analisis Data Penyewaan Sepeda 🔍")
# 
# # Show raw data
# st.subheader("Data Penyewaan Sepeda")
# st.write("Data Hari:")
# st.dataframe(day_df)
# st.write("Data Jam:")
# st.dataframe(hour_df)
# 
# # Visualization: Pengaruh Kondisi Cuaca Terhadap Jumlah Penyewaan Sepeda
# st.subheader("Pengaruh Kondisi Cuaca terhadap Jumlah Penyewaan Sepeda")
# weathersit_counts = {1: 2257952, 2: 996858, 3: 37869}
# labels = ['Cerah', 'Mendung', 'Hujan']
# counts = [weathersit_counts[1], weathersit_counts[2], weathersit_counts[3]]
# colors = ['#FFB6C1', '#DDA0DD', '#ADD8E6']
# 
# plt.figure(figsize=(8, 5))
# plt.bar(labels, counts, color=colors)
# plt.xlabel('Kondisi Cuaca')
# plt.ylabel('Jumlah Penyewaan Sepeda')
# plt.title('Pengaruh Kondisi Cuaca Terhadap Jumlah Penyewaan Sepeda')
# plt.grid(axis='y')
# st.pyplot(plt)
# 
# # Visualization: Perbedaan Jumlah Sepeda yang Disewa antara Hari Kerja dan Akhir Pekan
# st.subheader("Perbedaan Jumlah Sepeda yang Disewa antara Hari Kerja dan Akhir Pekan")
# day_df['day_type'] = day_df['weekday'].apply(lambda x: 'Akhir Pekan' if x in [5, 6] else 'Hari Kerja')
# day_type_counts = day_df.groupby('day_type')['cnt'].sum().reset_index()
# colors = ['#D5A6E5', '#F2A3C7']
# 
# plt.figure(figsize=(8, 5))
# sns.barplot(x='day_type', y='cnt', data=day_type_counts, palette=colors)
# plt.title('Jumlah Penyewaan Sepeda Berdasarkan Tipe Hari')
# plt.xlabel('Tipe Hari')
# plt.ylabel('Jumlah Penyewaan Sepeda')
# plt.xticks(rotation=45)
# plt.grid(axis='y')
# st.pyplot(plt)
# 
# # Visualization: Pengaruh Temperatur dan Kondisi Cuaca Terhadap Jumlah Penyewaan Sepeda
# st.subheader("Pengaruh Temperatur dan Kondisi Cuaca Terhadap Jumlah Penyewaan Sepeda")
# plt.figure(figsize=(8, 5))
# sns.scatterplot(x='temp', y='cnt', hue='weathersit', data=day_df, palette="viridis")
# plt.xlabel('Temperatur')
# plt.ylabel('Jumlah Penyewaan Sepeda')
# plt.title('Pengaruh Temperatur dan Kondisi Cuaca Terhadap Jumlah Penyewaan Sepeda')
# plt.grid(True)
# st.pyplot(plt)
# 
# # Conclusion
# st.subheader("Kesimpulan")
# 
# # Conclusion for question 1
# st.write("- **Pertanyaan 1:** Terdapat perubahan signifikan terhadap penyewaan sepeda pada cuaca cerah, mendung, dan hujan. Perubahannya mencapai 50% dari cuaca cerah ke cuaca mendung. Untuk cuaca hujan, penyewa sepeda sangat sedikit dibandingkan dengan mendung dan cuaca cerah.")
# 
# # Conclusion for question 2
# st.write("- **Pertanyaan 2:** Terdapat perbedaan yang tidak terlalu signifikan antara penyewaan sepeda pada hari kerja dan akhir pekan. Meskipun ada sedikit peningkatan pada akhir pekan, jumlah penyewaan sepeda pada hari kerja tetap cukup tinggi.")
# 
# # Footer
# st.write("**Developed by:** Nabila P. 🚲")
# st.write("**Source of Data:** [Bike Sharing Dataset](https://www.kaggle.com/datasets/lakshmi25npathi/bike-sharing-dataset)")
# 
# # Run the app
# if __name__ == '__main__':
#     st.write("This is a streamlit app!")
#

!streamlit run app.py &>/content/logs.txt & npx localtunnel --port 8501 & curl ipv4.icanhazip.com